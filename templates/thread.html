{% extends "postform.html" %}
{% load rainbow %}
{% block title %}thread{% endblock %}
{% block head %}
<script type="text/javascript" src="/static/js/jquery-1.4.2.min.js"></script>         
<script type="text/javascript" src="/static/js/thread.js"></script>
{% endblock %}
{% block threads %}

{% for thread in threads %}
<h2>Thread {{ thread.id }}</h2>

<hr/>

<div class="oppost">
{% if thread.op.image %}

<span class="filesize">Image {{thread.op.image.content_type}}: 
  {{ thread.op.image.size }} {{ thread.op.image.xy }}</span>

<span class="reflink">
  <a class="reflink" name="p{{thread.op.post}}" 
    href="#p{{post.post}}" postid="{{thread.op.post}}" 
  >#{{thread.op.post}}</a>
</span>


<br/>
<a href="/image/{{thread.op.image.key}}" target="_blank">
  <img class="thumb" src="/{{thread.op.image.thumb}}"/>
</a>
{% endif %}

<label>
  <span class="postername">{{ thread.op.name }}</span>
  {{thread.op.rainbow|rainbow}}
</label>

{% if reply %}
  <a href="{{ thread.id }}">Reply</a>
{% endif %}

<br/>
<blockquote class="postdata">{{ thread.op.text }}</blockquote>
</div>

{% if thread.skipmsg %}
<span class="omittedposts">{{ thread.skipmsg }}</span>
{% endif %}

{% for post in thread.posts %}
<table>
  <tbody>
    <tr>
      <td class="doubledash">&gt;&gt;</td>
      <td class="reply">
        <label>
          <span class="commentpostername">{{ post.name }}</span>
          {{post.rainbow|rainbow}}
        </label>
        {% if post.sage %}<label><b>SAGE</b><br/></label>{% endif %}
        <span class="reflink">
          <a class="reflink" name="p{{post.post}}" 
            href="#p{{post.post}}" postid="{{post.post}}" 
          >#{{post.post}}</a>
        </span>
        {% if post.image %}
  <span class="filesize">Image {{post.image.content_type}}: 
  {{ post.image.size }} {{ post.image.xy }}</span>
        <br/>
<a href="/image/{{post.image.key}}" target="_blank">
  <img class="thumb" src="/{{post.image.thumb}}"/>
</a>
        {% endif %}
        <blockquote class="postdata">{{ post.text }}</blockquote>
      </td>
    </tr>
  </tbody>
</table>

{% endfor %}
<div style="clear: left"></div>
<hr/>
{% endfor %}

{% endblock %}
