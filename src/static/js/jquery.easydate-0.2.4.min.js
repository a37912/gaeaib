(function(f){function q(a,b){var d=(n().getTime()-a.getTime())/1E3,c=Math.abs(d);if(!isNaN(d)){var g=0,h;for(h in b.units){var e=b.units[h];if(!(e.past_only&&d<0||e.future_only&&d>0)){if(c<e.limit)return isNaN(e.in_seconds)?d<0?(g-c)*1E3+100:(e.limit-c)*1E3+100:d<0?c%e.in_seconds*1E3+100:(e.in_seconds-c%e.in_seconds)*1E3+100;g=e.limit}}if(d<0)for(h=b.units.length-1;h>=0;h--){e=b.units[h];if(!e.past_only)return(e.limit-c)*1E3+100}}}function r(a){var b=a.data("easydate.date");if(isNaN(b)){b=parseInt(a.attr("datetime"));
b=new Date(b*1E3);a.data("easydate.date",b)}return b}function k(a){var b=a.data("easydate.settings"),d=f.data(a[0]);l[d]=a;delete i[d];var c=r(a,b);if(!isNaN(c)){a.html(s(c,b));if(b.live){b=q(c,b);if(!isNaN(b)){if(b>2147483647)b=2147483647;b=setTimeout(function(){k(a)},Math.round(b));i[d]=b}}}}f.easydate={};f.easydate.locales={};f.easydate.locales.enUS={future_format:"%s %t",past_format:"%t %s",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",
days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years",yesterday:"yesterday",tomorrow:"tomorrow",now:"just now",ago:"ago","in":"in"};var o={live:true,set_title:true,format_future:true,format_past:true,units:[{name:"now",limit:5},{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"yesterday",limit:172800,past_only:true},{name:"tomorrow",limit:172800,future_only:true},{name:"day",limit:604800,
in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:Infinity,in_seconds:31556926}],uneasy_format:function(a){return a.toLocaleDateString()},locale:f.easydate.locales.enUS},p=0,i={},m={},l={},j=function(a,b,d){if(f.easydate.__)return f.easydate.__(a,b,d);if(!isNaN(b)&&b!=1)a+="s";return d.locale[a]||a};f.easydate.pause=function(a){var b=function(c){clearTimeout(i[c]);delete i[c];m[c]=true};if(a)f(a).each(function(){var c=
jQuery.data(this);isNaN(i[c])||b(c)});else for(var d in i)b(d)};f.easydate.resume=function(a){var b=function(c){delete m[c];k(l[c])};if(a)f(a).each(function(){var c=jQuery.data(this);isNaN(m[c])||b(c)});else for(var d in m)b(d)};f.easydate.set_now=function(a){a=a instanceof Date?a.getTime():Date.parse(a);if(!isNaN(a)){p=a-(new Date).getTime();for(var b in l){isNaN[i[b]]||clearTimeout(i[b]);k(l[b])}}};var n=f.easydate.get_now=function(){var a=new Date;a.setTime(a.getTime()+p);return a},s=f.easydate.format_date=
function(a,b){var d=f.extend({},o,b),c=(n().getTime()-a.getTime())/1E3,g=Math.abs(c);if(!isNaN(c))if(!(!d.format_future&&c<0||!d.format_past&&c>0)){for(var h in d.units){var e=d.units[h];if(!(e.past_only&&c<0||e.future_only&&c>0))if(g<e.limit){if(isNaN(e.in_seconds))return j(e.name,NaN,d);g=g/e.in_seconds;g=Math.round(g);return(c<0?j("future_format",NaN,d).replace("%s",j("in",NaN,d)):j("past_format",NaN,d).replace("%s",j("ago",NaN,d))).replace("%t",g+" "+j(e.name,g,d))}}return d.uneasy_format(a)}};
f.fn.easydate=function(a){this.data("easydate.settings",f.extend({},o,a));this.each(function(){f.data(this);k(f(this))})}})(jQuery);
